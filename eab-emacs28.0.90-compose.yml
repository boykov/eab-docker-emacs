version: '3.2'

services:
  eab-emacs28:
    image: harbor.homew.keenetic.pro/eab/eab-emacs28:0.0.1
    container_name: eab-emacs28
    hostname: chronos28
    privileged: true
    restart: always
    network_mode: bridge
    volumes:
      - type: volume
        source: pnt
        target: /home/eab/pnt
        volume:
          nocopy: true
      - /home/eab/data/gitno/github/eab-docker-emacs/:/mnt/workspace
      - /home/eab/.emacs.d:/home/eab/.emacs.d
      - /home/eab/.ssh:/home/eab/.ssh
      - /home/eab/git/:/home/eab/git/
      - /home/eab/git/org-chronos:/home/eab/git/org
      - /home/eab/data:/home/eab/data
      - /home/eab/newdata:/home/eab/newdata
      - /home/eab/.bashrc:/home/eab/.bashrc
      - /home/eab/.bash_history:/home/eab/.bash_history
      - /home/eab/.profile:/home/eab/.profile
      - /home/eab/.authinfo:/home/eab/.authinfo
      - /home/eab/.gitconfig:/home/eab/.gitconfig
      - /etc/ssh:/etc/ssh
      - /tmp/user:/tmp/user
      - /etc/localtime:/etc/localtime:ro
      - /var/run/dbus/system_bus_socket:/var/run/dbus/system_bus_socket
      - /tmp/.X11-unix:/tmp/.X11-unix
    environment:
      - 'UNAME=eab'
      - 'GNAME=eab'
      - 'UID=1000'
      - 'GID=1000'
      - 'UHOME=/home/eab'
      - 'LANG=ru_RU.UTF-8'
      - 'LC_ALL=en_US.UTF-8'
      - 'TZ=Asia/Vladivostok'
      - 'DISPLAY=$DISPLAY'
      - 'TERM=xterm-256color'
      - 'EDAEMON=serverP'
    devices:
      - "/dev/console:/dev/console:rw"
volumes:
  pnt:
    driver_opts:
      type: "nfs"
      o: "addr=192.168.2.18,soft,nolock"
      device: ":/home/eab/pnt"
